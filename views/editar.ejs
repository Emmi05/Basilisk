
<%- include ('layouts/head2.ejs') %>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">
        <% if (login) { %> 
        <!-- Sidebar -->
        <%- include ('layouts/sidebar.ejs') %>
        <!-- end sidehar -->
       

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar /header -->
                <%- include ('layouts/header.ejs') %>
                  <!-- header -->
                  <% } %> 
        
       <!-- Begin Page Content -->
       <% usuarios.forEach(function(usuario) { %>
        <div class="container-fluid">
            <h1>Editar usuarios</h1>
                <div class="row">
                    <div class="col-md-12">
                        <form action="/update/<%= usuario.id %>" method="POST">
                            <input id="id" name="id" value="<%= usuario.id %>" hidden>

                            <div class="form-group">
                                <label for="user">Usuario:</label>
                                <input type="text" class="form-control" id="user" name="user"  value="<%= usuario.user %>">
                                <div id="rol" class="form-text">
                                    El usuario debe ser mayor o igual a 5 caracteres
                                   </div>
                            </div>

                            <div class="form-group">
                                <label for="name">Nombre:</label>
                                <input type="text" class="form-control" id="name" name="name"  value="<%= usuario.name %>">
                                <div id="rol" class="form-text">
                                    El nombre debera ser texto unicamente.
                                   </div>
                            </div>

                            <div class="form-group">
                                <label for="rol">Rol:</label>
                                <select class="form-control" id="rol" name="rol">
                                    <option value="">Seleccionar</option>
                                    <% roles.forEach(rol => { %>
                                        <option value="<%= rol.id_rol %>" <%= usuario.id_rol === rol.id_rol ? "selected" : "" %>><%= rol.rol_name %></option>
                                    <% }); %>
                                </select>
                            </div>
                           

                            <a href="/usuarios" class="btn btn-secondary">Cancelar</a>
                            <button type="submit" class="btn btn-primary"  value="Save" >Guardar</button>

                        </form>
                    </div>
                </div>
       
                <% }); %>
            
<%- include ('layouts/logout.ejs') %>


    		<!-- Bootstrap core JavaScript-->
  <script src="../resources/vendor/jquery/jquery.min.js"></script>
  <script src="../resources/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="../resources/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="../resources/scripts/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="../resources/vendor/datatables/jquery.dataTables.min.js"></script>
  <script src="../resources/vendor/datatables/dataTables.bootstrap4.min.js"></script>

  <!-- Page level custom scripts -->
  <script src="../resources/scripts/datables.js"></script>

     		
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<% if (typeof alert != "undefined")  { %>
 <script>
 Swal.fire({
   title:'<%= alertTitle %>',
   text:'<%= alertMessage %>',
   icon:'<%= alertIcon %>',
   showConfirmButton: <%= showConfirmButton %>,
   timer: <%= timer %>
 }).then(()=>{
   window.location='/<%= ruta %>'
 })
 </script>
<% } %>

<%- include ('layouts/dash2.ejs') %>


 
</div>

</body>
</html>