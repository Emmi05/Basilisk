
<style>
  #suggestions {
  position: absolute;
  background-color: #ffffff;
  border: 1px solid #ffffff;
  border-radius: 5px; /* Añadido para bordes redondeados */
  box-shadow: 0px 4px 6px rgba(0,0,0,0.1); /* Añadido para sombra */
  margin-top: 5px;
  z-index: 1000; /* Ajusta este valor según tus necesidades */

}

.list-group-item {
  cursor: pointer;

}
</style>
<%- include ('layouts/head.ejs') %>
<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">
        <% if (login) { %> 
        <!-- Sidebar -->
        <%- include ('layouts/sidebar.ejs') %>
        <!-- end sidehar -->
       

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar /header -->
                <%- include ('layouts/header.ejs') %>
                  <!-- header -->
                  <% } %> 
        
       <!-- Begin Page Content -->

        <div class="container-fluid">
            <h1>Registro ventas</h1>
            <form class="row g-3" action="" method="POST" autocomplete="off">
                
                <div class="col-md-6">
                  <label for="myInput" class="form-label">Cliente</label>
                  <input type="text" class="form-control" id="myInput" name="cliente" placeholder="cliente" >
                  <ul id="suggestions" class="list-group" ></ul>
              </div>

                <div class="col-md-6">
                  <label for="terreno" name="terreno" class="form-label">Terreno</label>
                  <input type="text" class="form-control" id="name" name="lote">
                </div>

                <div class="col-md-6">
                    <label for="precio" name="precio" class="form-label">precio</label>
                    <input type="int" class="form-control" id="precio" name="precio">
                  </div>
                 

                  <div class="col-md-6">
                    <label for="fecha" name="fecha" class="form-label">Fecha</label>
                    <input type="date" class="form-control" id="fecha" name="fecha">
                  </div>

                  <div class="col-md-6">
                    <label for="inicial" name="inicial" class="form-label">Inicial</label>
                    <input type="int" class="form-control" id="inicial" name="inicial">
                  </div>

                  <div class="col-md-6">
                    <label for="n_plazos" name="n_plazos" class="form-label">Cantidad Plazo</label>
                    <input type="int" class="form-control" id="n_plazos" name="n_plazos">
                  </div>
                
                  <!-- lO HAGO DESPLEGABLE O QUE JALE EL NOMBRE -->
                  <div class="col-md-6">
                    <label for="vendedor" name="vendedor" class="form-label">Vendedor</label>
                    <input type="int" class="form-control" id="n_plazos" name="vendedor" value="<%= name %>" disabled>
                  </div>
                

              <br> <br> <br> <br>
                <div class="col-12">
                  <a href="/" class="btn btn-secondary">Cancelar</a>
                  <button type="submit" class="btn btn-primary"  value="Save">Guardar</button>
                </div>

              </form>

    <!-- Footer -->

<!-- End of Footer -->

</div>
<!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
<i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
aria-hidden="true">
<div class="modal-dialog" role="document">
<div class="modal-content">
  <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
      <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
      </button>
  </div>
  <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
  <div class="modal-footer">
      <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
      <a class="btn btn-primary" href="logout">Logout</a>
  </div>
</div>
</div>
</div>s        

    		<!-- Bootstrap core JavaScript-->
  <script src="../resources/vendor/jquery/jquery.min.js"></script>
  <script src="../resources/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="../resources/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="../resources/scripts/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->
  <script src="../resources/vendor/datatables/jquery.dataTables.min.js"></script>
  <script src="../resources/vendor/datatables/dataTables.bootstrap4.min.js"></script>

  <!-- Page level custom scripts -->
  <script src="../resources/scripts/datables.js"></script>

     		
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

<% if (typeof alert != "undefined")  { %>
 <script>
 Swal.fire({
   title:'<%= alertTitle %>',
   text:'<%= alertMessage %>',
   icon:'<%= alertIcon %>',
   showConfirmButton: <%= showConfirmButton %>,
   timer: <%= timer %>
 }).then(()=>{
   window.location='/<%= ruta %>'
 })
 </script>
<% } %>

<script>
$(document).ready(function() {
  var inputField = $('#myInput');

  inputField.on('input', autoComplete);

  function autoComplete(event) {
    var inputValue = event.target.value.toLowerCase();
    var suggestions = $('#suggestions');
    suggestions.empty();

    if (inputValue.length) {
      $.ajax({
        url: '/ventas', // La ruta de tu endpoint en el backend
        method: 'GET',
        success: function(data) {
          console.log(data)
          var clientes = data.ventas.map(function(venta) {
            return venta.customer_name;
          });

          var filteredClients = clientes.filter(function(cliente) {
            return cliente.toLowerCase().startsWith(inputValue);
          });

          filteredClients.forEach(function(cliente) {
            var suggestionItem = $('<li class="list-group-item"></li>').text(cliente);
            suggestions.append(suggestionItem);
          });
        }
      });
    }
  }

  $('#suggestions').on('click', '.list-group-item', function() {
    inputField.val($(this).text());
    $('#suggestions').empty();
  });
});

</script>
</div>
</body>
</html>